
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Social Media Data Challenge</title>
</head>
<body>

    <h1>Social Media Data Challenge</h1>

    <p>Check out the JavaScript console for some data crunching action...</p>

    <div id="social-app">
    </div>

    <script src="https://d3js.org/d3-array.v2.min.js"></script>
    <script type="text/javascript">

        //
        // SETUP SECTION (leave this as-is)
        //

        var tweets = [
            {
                "id": 100200297,
                "full_text": "Look at this delicious sandwich!",
                "img_url": "https://sandwhoa.com/sandwich.png",
                "user": {"screen_name": "sandwhoa", "followers": 5000},
                "likes_count": 150
            },
            {
                "id": 100200298,
                "full_text": "I love sandwiches",
                "img_url": null,
                "user": {"screen_name": "person1", "followers": 100},
                "likes_count": 5
            },
            {
                "id": 100200299,
                "full_text": "@sandwhoa yumm...",
                "img_url": null,
                "user": {"screen_name": "person2", "followers": 200},
                "likes_count": 10
            },
            {
                "id": 100200300,
                "full_text": "@sandwhoa that sandwich looks amazing!!",
                "img_url": null,
                "user": {"screen_name": "person3", "followers": 300},
                "likes_count": 35
            },
            {
                "id": 100200301,
                "full_text": "I ate a great sandwich today",
                "img_url": null,
                "user": {"screen_name": "person4", "followers": 400},
                "likes_count": 50
            }
        ] // leave this variable as-is

        //
        // IMPLEMENTATION SECTION (write your own JavaScript below)
        //

        console.log("TWEETS", tweets)

        // A) Print the screen name of the user who authored the first tweet (i.e. "sandwhoa").

        console.log("USER:", tweets[0].user.screen_name)

        // B) Of all the tweets which include the phrase "@sandwhoa" in their full text,
        // ... print the screen name of the user who authored that tweet, each on a separate line (i.e. "person2", then "person3").

        var matchingTweets = tweets.filter(function(tweet){
            //return tweet.full_text.includes("@sandwhoa")
            return tweet.full_text.toUpperCase().includes("@SANDWHOA")
        })
        console.log("MATCHES", matchingTweets.length)

        matchingTweets.forEach(mt => console.log(mt.user.screen_name))

        // C) Of all the tweets which include the phrase "@sandwhoa" in their full text,
        // ... determine which tweet has the greatest number of likes,
        // ... and then print the screen name of the user who authored that tweet (i.e. "person3").
        // ... FYI: Assume the tweet order can change at any time and has no relationship with the number of likes.

        //var topTweets = matchingTweets.sort(mt => mt.likes_count)

        matchingTweets.sort((a,b) => b.likes_count - a.likes_count)
        console.log(matchingTweets[0].likes_count, matchingTweets[0].user.screen_name)


    </script>

</body>
</html>
